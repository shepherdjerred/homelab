/* esm.sh - yaml@2.7.0/browser/dist/stringify/stringifyCollection */
import{isNode as d,isPair as C}from"../nodes/identity.mjs";import{stringify as v}from"./stringify.mjs";import{lineComment as S,indentComment as j}from"./stringifyComment.mjs";function W(s,l,c){return(l.inFlow??s.flow?P:F)(s,l,c)}function F({comment:s,items:l},c,{blockItemPrefix:f,flowChars:a,itemIndent:g,onChompKeep:h,onComment:$}){let{indent:y,options:{commentString:r}}=c,B=Object.assign({},c,{indent:g,type:null}),n=!1,o=[];for(let t=0;t<l.length;++t){let e=l[t],i=null;if(d(e))!n&&e.spaceBefore&&o.push(""),w(c,o,e.commentBefore,n),e.comment&&(i=e.comment);else if(C(e)){let u=d(e.key)?e.key:null;u&&(!n&&u.spaceBefore&&o.push(""),w(c,o,u.commentBefore,n))}n=!1;let p=v(e,B,()=>i=null,()=>n=!0);i&&(p+=S(p,g,r(i))),n&&i&&(n=!1),o.push(f+p)}let m;if(o.length===0)m=a.start+a.end;else{m=o[0];for(let t=1;t<o.length;++t){let e=o[t];m+=e?`
${y}${e}`:`
`}}return s?(m+=`
`+j(r(s),y),$&&$()):n&&h&&h(),m}function P({items:s},l,{flowChars:c,itemIndent:f}){let{indent:a,indentStep:g,flowCollectionPadding:h,options:{commentString:$}}=l;f+=g;let y=Object.assign({},l,{indent:f,inFlow:!0,type:null}),r=!1,B=0,n=[];for(let t=0;t<s.length;++t){let e=s[t],i=null;if(d(e))e.spaceBefore&&n.push(""),w(l,n,e.commentBefore,!1),e.comment&&(i=e.comment);else if(C(e)){let u=d(e.key)?e.key:null;u&&(u.spaceBefore&&n.push(""),w(l,n,u.commentBefore,!1),u.comment&&(r=!0));let k=d(e.value)?e.value:null;k?(k.comment&&(i=k.comment),k.commentBefore&&(r=!0)):e.value==null&&u?.comment&&(i=u.comment)}i&&(r=!0);let p=v(e,y,()=>i=null);t<s.length-1&&(p+=","),i&&(p+=S(p,f,$(i))),!r&&(n.length>B||p.includes(`
`))&&(r=!0),n.push(p),B=n.length}let{start:o,end:m}=c;if(n.length===0)return o+m;if(!r){let t=n.reduce((e,i)=>e+i.length+2,2);r=l.options.lineWidth>0&&t>l.options.lineWidth}if(r){let t=o;for(let e of n)t+=e?`
${g}${a}${e}`:`
`;return`${t}
${a}${m}`}else return`${o}${h}${n.join(" ")}${h}${m}`}function w({indent:s,options:{commentString:l}},c,f,a){if(f&&a&&(f=f.replace(/^\n+/,"")),f){let g=j(l(f),s);c.push(g.trimStart())}}export{W as stringifyCollection};
//# sourceMappingURL=stringifyCollection.mjs.map