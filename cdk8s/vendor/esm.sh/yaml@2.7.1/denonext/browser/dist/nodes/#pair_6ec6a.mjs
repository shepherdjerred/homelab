/* esm.sh - yaml@2.7.1/browser/dist/nodes/Pair */
import{createNode as J}from"../doc/createNode.mjs";import{isCollection as F,isNode as $,isScalar as A,isSeq as q}from"./identity.mjs";import{Scalar as B}from"./Scalar.mjs";import{stringify as K}from"../stringify/stringify.mjs";import{lineComment as S,indentComment as I}from"../stringify/stringifyComment.mjs";function C({key:t,value:n},e,o,d){let{allNullValues:O,doc:T,indent:P,indentStep:L,options:{commentString:p,indentSeq:W,simpleKeys:c}}=e,s=$(t)&&t.comment||null;if(c){if(s)throw new Error("With simple keys, key nodes cannot have comments");if(F(t)||!$(t)&&typeof t=="object"){let m="With simple keys, collection cannot be used as a key value";throw new Error(m)}}let r=!c&&(!t||s&&n==null&&!e.inFlow||F(t)||(A(t)?t.type===B.BLOCK_FOLDED||t.type===B.BLOCK_LITERAL:typeof t=="object"));e=Object.assign({},e,{allNullValues:!1,implicitKey:!r&&(c||!O),indent:P+L});let h=!1,u=!1,i=K(t,e,()=>h=!0,()=>u=!0);if(!r&&!e.inFlow&&i.length>1024){if(c)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");r=!0}if(e.inFlow){if(O||n==null)return h&&o&&o(),i===""?"?":r?`? ${i}`:i}else if(O&&!c||n==null&&r)return i=`? ${i}`,s&&!h?i+=S(i,e.indent,p(s)):u&&d&&d(),i;h&&(s=null),r?(s&&(i+=S(i,e.indent,p(s))),i=`? ${i}
${P}:`):(i=`${i}:`,s&&(i+=S(i,e.indent,p(s))));let g,w,y;$(n)?(g=!!n.spaceBefore,w=n.commentBefore,y=n.comment):(g=!1,w=null,y=null,n&&typeof n=="object"&&(n=T.createNode(n))),e.implicitKey=!1,!r&&!s&&A(n)&&(e.indentAtStart=i.length+1),u=!1,!W&&L.length>=2&&!e.inFlow&&!r&&q(n)&&!n.flow&&!n.tag&&!n.anchor&&(e.indent=e.indent.substring(2));let N=!1,l=K(n,e,()=>N=!0,()=>u=!0),f=" ";if(s||g||w){if(f=g?`
`:"",w){let m=p(w);f+=`
${I(m,e.indent)}`}l===""&&!e.inFlow?f===`
`&&(f=`

`):f+=`
${e.indent}`}else if(!r&&F(n)){let m=l[0],b=l.indexOf(`
`),j=b!==-1,_=e.inFlow??n.flow??n.items.length===0;if(j||!_){let D=!1;if(j&&(m==="&"||m==="!")){let a=l.indexOf(" ");m==="&"&&a!==-1&&a<b&&l[a+1]==="!"&&(a=l.indexOf(" ",a+1)),(a===-1||b<a)&&(D=!0)}D||(f=`
${e.indent}`)}}else(l===""||l[0]===`
`)&&(f="");return i+=f+l,e.inFlow?N&&o&&o():y&&!N?i+=S(i,e.indent,p(y)):u&&d&&d(),i}import{addPairToJSMap as R}from"./addPairToJSMap.mjs";import{NODE_TYPE as V,PAIR as Y,isNode as M}from"./identity.mjs";function x(t,n,e){let o=J(t,void 0,e),d=J(n,void 0,e);return new E(o,d)}var E=class t{constructor(n,e=null){Object.defineProperty(this,V,{value:Y}),this.key=n,this.value=e}clone(n){let{key:e,value:o}=this;return M(e)&&(e=e.clone(n)),M(o)&&(o=o.clone(n)),new t(e,o)}toJSON(n,e){let o=e?.mapAsMap?new Map:{};return R(e,o,this)}toString(n,e,o){return n?.doc?C(this,n,e,o):JSON.stringify(this)}};export{E as Pair,x as createPair};
//# sourceMappingURL=Pair.mjs.map