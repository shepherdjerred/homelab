/* esm.sh - ts-pattern@5.6.0 */
var f=Symbol.for("@ts-pattern/matcher"),_=Symbol.for("@ts-pattern/isVariadic"),K="@ts-pattern/anonymous-select-key",A=t=>!!(t&&typeof t=="object"),x=t=>t&&!!t[f],u=(t,e,n)=>{if(x(t)){let r=t[f](),{matched:i,selections:s}=r.match(e);return i&&s&&Object.keys(s).forEach(a=>n(a,s[a])),i}if(A(t)){if(!A(e))return!1;if(Array.isArray(t)){if(!Array.isArray(e))return!1;let r=[],i=[],s=[];for(let a of t.keys()){let l=t[a];x(l)&&l[_]?s.push(l):s.length?i.push(l):r.push(l)}if(s.length){if(s.length>1)throw new Error("Pattern error: Using `...P.array(...)` several times in a single pattern is not allowed.");if(e.length<r.length+i.length)return!1;let a=e.slice(0,r.length),l=i.length===0?[]:e.slice(-i.length),S=e.slice(r.length,i.length===0?1/0:-i.length);return r.every((p,O)=>u(p,a[O],n))&&i.every((p,O)=>u(p,l[O],n))&&(s.length===0||u(s[0],S,n))}return t.length===e.length&&t.every((a,l)=>u(a,e[l],n))}return Reflect.ownKeys(t).every(r=>{let i=t[r];return(r in e||x(s=i)&&s[f]().matcherType==="optional")&&u(i,e[r],n);var s})}return Object.is(e,t)},g=t=>{var e,n,r;return A(t)?x(t)?(e=(n=(r=t[f]()).getSelectionKeys)==null?void 0:n.call(r))!=null?e:[]:Array.isArray(t)?j(t,g):j(Object.values(t),g):[]},j=(t,e)=>t.reduce((n,r)=>n.concat(e(r)),[]);function M(...t){if(t.length===1){let[e]=t;return n=>u(e,n,()=>{})}if(t.length===2){let[e,n]=t;return u(e,n,()=>{})}throw new Error(`isMatching wasn't given the right number of arguments: expected 1 or 2, received ${t.length}.`)}function h(t){return Object.assign(t,{optional:()=>k(t),and:e=>c(t,e),or:e=>$(t,e),select:e=>e===void 0?E(t):E(e,t)})}function P(t){return Object.assign((e=>Object.assign(e,{[Symbol.iterator](){let n=0,r=[{value:Object.assign(e,{[_]:!0}),done:!1},{done:!0,value:void 0}];return{next:()=>{var i;return(i=r[n++])!=null?i:r.at(-1)}}}}))(t),{optional:()=>P(k(t)),select:e=>P(e===void 0?E(t):E(e,t))})}function k(t){return h({[f]:()=>({match:e=>{let n={},r=(i,s)=>{n[i]=s};return e===void 0?(g(t).forEach(i=>r(i,void 0)),{matched:!0,selections:n}):{matched:u(t,e,r),selections:n}},getSelectionKeys:()=>g(t),matcherType:"optional"})})}var W=(t,e)=>{for(let n of t)if(!e(n))return!1;return!0},L=(t,e)=>{for(let[n,r]of t.entries())if(!e(r,n))return!1;return!0};function c(...t){return h({[f]:()=>({match:e=>{let n={},r=(i,s)=>{n[i]=s};return{matched:t.every(i=>u(i,e,r)),selections:n}},getSelectionKeys:()=>j(t,g),matcherType:"and"})})}function $(...t){return h({[f]:()=>({match:e=>{let n={},r=(i,s)=>{n[i]=s};return j(t,g).forEach(i=>r(i,void 0)),{matched:t.some(i=>u(i,e,r)),selections:n}},getSelectionKeys:()=>j(t,g),matcherType:"or"})})}function o(t){return{[f]:()=>({match:e=>({matched:!!t(e)})})}}function E(...t){let e=typeof t[0]=="string"?t[0]:void 0,n=t.length===2?t[1]:typeof t[0]=="string"?void 0:t[0];return h({[f]:()=>({match:r=>{let i={[e??K]:r};return{matched:n===void 0||u(n,r,(s,a)=>{i[s]=a}),selections:i}},getSelectionKeys:()=>[e??K].concat(n===void 0?[]:g(n))})})}function m(t){return typeof t=="number"}function y(t){return typeof t=="string"}function v(t){return typeof t=="bigint"}var z=h(o(function(t){return!0})),F=z,b=t=>Object.assign(h(t),{startsWith:e=>{return b(c(t,(n=e,o(r=>y(r)&&r.startsWith(n)))));var n},endsWith:e=>{return b(c(t,(n=e,o(r=>y(r)&&r.endsWith(n)))));var n},minLength:e=>b(c(t,(n=>o(r=>y(r)&&r.length>=n))(e))),length:e=>b(c(t,(n=>o(r=>y(r)&&r.length===n))(e))),maxLength:e=>b(c(t,(n=>o(r=>y(r)&&r.length<=n))(e))),includes:e=>{return b(c(t,(n=e,o(r=>y(r)&&r.includes(n)))));var n},regex:e=>{return b(c(t,(n=e,o(r=>y(r)&&!!r.match(n)))));var n}}),I=b(o(y)),d=t=>Object.assign(h(t),{between:(e,n)=>d(c(t,((r,i)=>o(s=>m(s)&&r<=s&&i>=s))(e,n))),lt:e=>d(c(t,(n=>o(r=>m(r)&&r<n))(e))),gt:e=>d(c(t,(n=>o(r=>m(r)&&r>n))(e))),lte:e=>d(c(t,(n=>o(r=>m(r)&&r<=n))(e))),gte:e=>d(c(t,(n=>o(r=>m(r)&&r>=n))(e))),int:()=>d(c(t,o(e=>m(e)&&Number.isInteger(e)))),finite:()=>d(c(t,o(e=>m(e)&&Number.isFinite(e)))),positive:()=>d(c(t,o(e=>m(e)&&e>0))),negative:()=>d(c(t,o(e=>m(e)&&e<0)))}),J=d(o(m)),w=t=>Object.assign(h(t),{between:(e,n)=>w(c(t,((r,i)=>o(s=>v(s)&&r<=s&&i>=s))(e,n))),lt:e=>w(c(t,(n=>o(r=>v(r)&&r<n))(e))),gt:e=>w(c(t,(n=>o(r=>v(r)&&r>n))(e))),lte:e=>w(c(t,(n=>o(r=>v(r)&&r<=n))(e))),gte:e=>w(c(t,(n=>o(r=>v(r)&&r>=n))(e))),positive:()=>w(c(t,o(e=>v(e)&&e>0))),negative:()=>w(c(t,o(e=>v(e)&&e<0)))}),R=w(o(v)),U=h(o(function(t){return typeof t=="boolean"})),V=h(o(function(t){return typeof t=="symbol"})),q=h(o(function(t){return t==null})),C=h(o(function(t){return t!=null})),D={__proto__:null,matcher:f,optional:k,array:function(...t){return P({[f]:()=>({match:e=>{if(!Array.isArray(e))return{matched:!1};if(t.length===0)return{matched:!0};let n=t[0],r={};if(e.length===0)return g(n).forEach(s=>{r[s]=[]}),{matched:!0,selections:r};let i=(s,a)=>{r[s]=(r[s]||[]).concat([a])};return{matched:e.every(s=>u(n,s,i)),selections:r}},getSelectionKeys:()=>t.length===0?[]:g(t[0])})})},set:function(...t){return h({[f]:()=>({match:e=>{if(!(e instanceof Set))return{matched:!1};let n={};if(e.size===0)return{matched:!0,selections:n};if(t.length===0)return{matched:!0};let r=(s,a)=>{n[s]=(n[s]||[]).concat([a])},i=t[0];return{matched:W(e,s=>u(i,s,r)),selections:n}},getSelectionKeys:()=>t.length===0?[]:g(t[0])})})},map:function(...t){return h({[f]:()=>({match:e=>{if(!(e instanceof Map))return{matched:!1};let n={};if(e.size===0)return{matched:!0,selections:n};let r=(l,S)=>{n[l]=(n[l]||[]).concat([S])};if(t.length===0)return{matched:!0};var i;if(t.length===1)throw new Error(`\`P.map\` wasn't given enough arguments. Expected (key, value), received ${(i=t[0])==null?void 0:i.toString()}`);let[s,a]=t;return{matched:L(e,(l,S)=>{let p=u(s,S,r),O=u(a,l,r);return p&&O}),selections:n}},getSelectionKeys:()=>t.length===0?[]:[...g(t[0]),...g(t[1])]})})},intersection:c,union:$,not:function(t){return h({[f]:()=>({match:e=>({matched:!u(t,e,()=>{})}),getSelectionKeys:()=>[],matcherType:"not"})})},when:o,select:E,any:z,_:F,string:I,number:J,bigint:R,boolean:U,symbol:V,nullish:q,nonNullable:C,instanceOf:function(t){return h(o(function(e){return n=>n instanceof e}(t)))},shape:function(t){return h(o(M(t)))}},T=class extends Error{constructor(e){let n;try{n=JSON.stringify(e)}catch{n=e}super(`Pattern matching error: no pattern matches value ${n}`),this.input=void 0,this.input=e}},B={matched:!1,value:void 0};function G(t){return new N(t,B)}var N=class t{constructor(e,n){this.input=void 0,this.state=void 0,this.input=e,this.state=n}with(...e){if(this.state.matched)return this;let n=e[e.length-1],r=[e[0]],i;e.length===3&&typeof e[1]=="function"?i=e[1]:e.length>2&&r.push(...e.slice(1,e.length-1));let s=!1,a={},l=(p,O)=>{s=!0,a[p]=O},S=!r.some(p=>u(p,this.input,l))||i&&!i(this.input)?B:{matched:!0,value:n(s?K in a?a[K]:a:this.input,this.input)};return new t(this.input,S)}when(e,n){if(this.state.matched)return this;let r=!!e(this.input);return new t(this.input,r?{matched:!0,value:n(this.input,this.input)}:B)}otherwise(e){return this.state.matched?this.state.value:e(this.input)}exhaustive(){if(this.state.matched)return this.state.value;throw new T(this.input)}run(){return this.exhaustive()}returnType(){return this}};export{T as NonExhaustiveError,D as P,D as Pattern,M as isMatching,G as match};
//# sourceMappingURL=ts-pattern.mjs.map