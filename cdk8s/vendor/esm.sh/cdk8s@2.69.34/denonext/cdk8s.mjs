/* esm.sh - cdk8s@2.69.34 */
import __Process$ from "node:process";
import*as __0$ from"node:fs";import*as __1$ from"/constructs@^10?target=denonext";import*as __2$ from"node:os";import*as __3$ from"node:path";import*as __4$ from"node:child_process";import*as __5$ from"/yaml@2.7.0/denonext/yaml.mjs";import*as __6$ from"/fast-json-patch@^3.1.1?target=denonext";import*as __7$ from"node:crypto";var require=n=>{const e=m=>typeof m.default<"u"?m.default:m,c=m=>Object.assign({__esModule:true},m);switch(n){case"node:fs":return e(__0$);case"constructs":return c(__1$);case"node:os":return e(__2$);case"node:path":return e(__3$);case"node:child_process":return e(__4$);case"yaml":return e(__5$);case"fast-json-patch":return c(__6$);case"node:crypto":return e(__7$);default:console.error('module "'+n+'" not found');return null;}};
var Dt=Object.create;var ze=Object.defineProperty;var Pt=Object.getOwnPropertyDescriptor;var Tt=Object.getOwnPropertyNames;var kt=Object.getPrototypeOf,$t=Object.prototype.hasOwnProperty;var h=(r=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(r,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):r)(function(r){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+r+'" is not supported')});var f=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var Nt=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Tt(e))!$t.call(r,s)&&s!==t&&ze(r,s,{get:()=>e[s],enumerable:!(n=Pt(e,s))||n.enumerable});return r};var Ft=(r,e,t)=>(t=r!=null?Dt(kt(r)):{},Nt(e||!r||!r.__esModule?ze(t,"default",{value:r,enumerable:!0}):t,r));var ge=f(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.sanitizeValue=je;function je(r,e={}){if(r==null)return;if(typeof r!="object")return r;if(Array.isArray(r))return e.filterEmptyArrays&&r.length===0?void 0:r.map(i=>je(i,e));if(r.constructor.name!=="Object")throw new Error(`can't render non-simple object of type '${r.constructor.name}'`);let t={},s=e.sortKeys??!0?Object.keys(r).sort():Object.keys(r);for(let i of s){let o=r[i],a=je(o,e);a!=null&&(t[i]=a)}if(!(e.filterEmptyObjects&&Object.keys(t).length===0))return t}});var Ee=f(j=>{"use strict";var xe,He;Object.defineProperty(j,"__esModule",{value:!0});j.DependencyVertex=j.DependencyGraph=void 0;var Be=Symbol.for("jsii.rtti"),z=class{constructor(e){this._fosterParent=new S;let t={};function n(o){t[o.node.path]=new S(o)}function s(o){return t[o.node.path]}for(let o of e.findAll())n(o);let i=[];for(let o of e.findAll())for(let a of o.node.dependencies)i.push({source:o,target:a});for(let o of i){if(!s(o.target))continue;let a=s(o.source),u=s(o.target);a.addChild(u)}for(let o of Object.values(t))o.inbound.length===0&&this._fosterParent.addChild(o)}get root(){return this._fosterParent}topology(){return this._fosterParent.topology()}};j.DependencyGraph=z;xe=Be;z[xe]={fqn:"cdk8s.DependencyGraph",version:"2.69.34"};var S=class{constructor(e=void 0){this._children=new Set,this._parents=new Set,this._value=e}get value(){return this._value}get outbound(){return Array.from(this._children)}get inbound(){return Array.from(this._parents)}topology(){let e=new Set,t=[];function n(s){for(let i of s.outbound)n(i);e.has(s)||(t.push(s),e.add(s))}return n(this),t.filter(s=>s.value).map(s=>s.value)}addChild(e){let t=e.findRoute(this);if(t.length!==0)throw t.push(e),new Error(`Dependency cycle detected: ${t.filter(n=>n.value).map(n=>n.value.node.path).join(" => ")}`);this._children.add(e),e.addParent(this)}addParent(e){this._parents.add(e)}findRoute(e){let t=[];return n(this),t;function n(s){t.push(s);let i=!1;for(let o of s.outbound){if(o===e)return t.push(o),!0;i=n(o)}return i||t.pop(),i}}};j.DependencyVertex=S;He=Be;S[He]={fqn:"cdk8s.DependencyVertex",version:"2.69.34"}});var R=f(H=>{"use strict";var Ge;Object.defineProperty(H,"__esModule",{value:!0});H.Names=void 0;var Jt=Symbol.for("jsii.rtti"),zt=h("node:crypto"),Ye=63,xt=/^[0-9a-z-]+$/,Ht=/^(([0-9a-zA-Z][0-9a-zA-Z-_.]*)?[0-9a-zA-Z])?$/,_=8,x=class{static toDnsLabel(e,t={}){let n=t.maxLen??Ye,s=t.delimiter??"-",i=t.includeHash??!0;if(n<_&&i)throw new Error(`minimum max length for object names is ${_} (required for hash)`);let o=e.node,a=o.path.split("/");return a.push(...t.extra??[]),a.length===1&&xt.test(a[0])&&a[0].length<=n?a[0]:(a=a.map(u=>Vt(u,n)),i&&a.push(Ke(o,_)),Ve(a,s,n))}static toLabelValue(e,t={}){let n=t.maxLen??Ye,s=t.delimiter??"-",i=t.includeHash??!0;if(n<_&&i)throw new Error(`minimum max length for label is ${_} (required for hash)`);if(/[^0-9a-zA-Z-_.]/.test(s))throw new Error('delim should not contain "[^0-9a-zA-Z-_.]"');let o=e.node,a=o.path.split("/");return a.push(...t.extra??[]),a.length===1&&Ht.test(a[0])&&a[0].length<=n?a[0]:(a=a.map(p=>Kt(p,n)),i&&a.push(Ke(o,_)),Ve(a,s,n).replace(/^[^0-9a-zA-Z]+/,""))}constructor(){}};H.Names=x;Ge=Jt;x[Ge]={fqn:"cdk8s.Names",version:"2.69.34"};function Bt(r,e,t){return r!==t[e-1]}function Yt(r,e,t){return r.toLowerCase()!=="resource"&&r.toLowerCase()!=="default"}function Ve(r,e,t){return r.reverse().filter(Bt).join("/").slice(0,t).split("/").reverse().filter(n=>n).join(e).split(e).filter(n=>n).filter(Yt).join(e)}function Vt(r,e){return r.toLocaleLowerCase().replace(/[^0-9a-zA-Z-_.]/g,"").substr(0,e)}function Ke(r,e){if(__Process$.env.CDK8S_LEGACY_HASH){let t=zt.createHash("sha256");return t.update(r.path),t.digest("hex").slice(0,e)}return r.addr.substring(0,_)}function Kt(r,e){return r.replace(/[^0-9a-zA-Z-_.]/g,"").substr(0,e)}});var Ae=f(Y=>{"use strict";var Ze;Object.defineProperty(Y,"__esModule",{value:!0});Y.Lazy=void 0;var Gt=Symbol.for("jsii.rtti"),B=class r{static any(e){return new r(e)}constructor(e){this.producer=e}produce(){return this.producer.produce()}};Y.Lazy=B;Ze=Gt;B[Ze]={fqn:"cdk8s.Lazy",version:"2.69.34"}});var q=f(b=>{"use strict";var Ue,Xe,We,Qe;Object.defineProperty(b,"__esModule",{value:!0});b.NumberStringUnionResolver=b.ImplicitTokenResolver=b.LazyResolver=b.ResolutionContext=void 0;b.resolve=V;var Z=Symbol.for("jsii.rtti"),Zt=C(),Ut=Ae(),M=class{constructor(e,t,n){this.obj=e,this.key=t,this.value=n,this.replaced=!1}replaceValue(e){this.replacedValue=e,this.replaced=!0}};b.ResolutionContext=M;Ue=Z;M[Ue]={fqn:"cdk8s.ResolutionContext",version:"2.69.34"};var K=class{resolve(e){if(e.value instanceof Ut.Lazy){let t=e.value.produce();e.replaceValue(t)}}};b.LazyResolver=K;Xe=Z;K[Xe]={fqn:"cdk8s.LazyResolver",version:"2.69.34"};var G=class{resolve(e){if(typeof e.value.resolve=="function"){let t=e.value.resolve();e.replaceValue(t)}}};b.ImplicitTokenResolver=G;We=Z;G[We]={fqn:"cdk8s.ImplicitTokenResolver",version:"2.69.34"};var I=class r{resolve(e){e.value.constructor!==Object&&r.TYPES.includes(typeof e.value.value)&&e.replaceValue({value:e.value.value})}};b.NumberStringUnionResolver=I;Qe=Z;I[Qe]={fqn:"cdk8s.NumberStringUnionResolver",version:"2.69.34"};I.TYPES=["number","string"];function V(r,e,t){let n=Zt.App.of(t).resolvers;if(e==null)return e;let s=new M(t,r,e);for(let i of n)if(i.resolve(s),s.replaced)return V(r,s.replacedValue,t);if(Array.isArray(e))return e.map((i,o)=>V([...r,`${o}`],i,t));if(e.constructor==Object){let i={};for(let[o,a]of Object.entries(e))i[o]=V([...r,o],a,t);return i}return e}});var L=f(X=>{"use strict";var nt;Object.defineProperty(X,"__esModule",{value:!0});X.Yaml=void 0;var Xt=Symbol.for("jsii.rtti"),Wt=h("node:child_process"),et=h("node:fs"),Qt=h("node:os"),Re=h("node:path"),tt=h("yaml"),er=10*1024*1024,rt="1.1",U=class r{static formatObjects(e){return this.stringify(...e)}static save(e,t){let n=this.stringify(...t);et.writeFileSync(e,n,{encoding:"utf8"})}static stringify(...e){return e.map(t=>t===void 0?`
`:tt.stringify(t,{keepUndefined:!0,lineWidth:0,version:rt})).join(`---
`)}static tmp(e){let t=et.mkdtempSync(Re.join(Qt.tmpdir(),"cdk8s-")),n=Re.join(t,"temp.yaml");return r.save(n,e),n}static load(e){let t=tr(e),n=tt.parseAllDocuments(t,{version:rt}),s=new Array;for(let i of n.map(o=>o.toJSON()))i!==void 0&&i!==null&&(Array.isArray(i)&&i.length===0||typeof i=="object"&&Object.keys(i).length===0||s.push(i));return s}constructor(){}};X.Yaml=U;nt=Xt;U[nt]={fqn:"cdk8s.Yaml",version:"2.69.34"};function tr(r){let e=Re.join("/cdk8s@2.69.34/denonext","_loadurl.js");return(0,Wt.execFileSync)(__Process$.execPath,[e,r],{encoding:"utf-8",maxBuffer:er}).toString()}});var C=f(g=>{"use strict";var it;Object.defineProperty(g,"__esModule",{value:!0});g.App=g.YamlOutputType=void 0;var rr=Symbol.for("jsii.rtti"),Me=h("node:fs"),O=h("node:path"),nr=h("constructs"),De=k(),y=T(),ot=Ee(),at=R(),Ie=q(),D=L(),v;(function(r){r[r.FILE_PER_APP=0]="FILE_PER_APP",r[r.FILE_PER_CHART=1]="FILE_PER_CHART",r[r.FILE_PER_RESOURCE=2]="FILE_PER_RESOURCE",r[r.FOLDER_PER_CHART_FILE_PER_RESOURCE=3]="FOLDER_PER_CHART_FILE_PER_RESOURCE"})(v||(g.YamlOutputType=v={}));var P=class{constructor(){this.nodeChildrenCache=new Map}findAll(e){if(this.nodeChildrenCache.has(e))return this.nodeChildrenCache.get(e);let t=e.findAll();return this.nodeChildrenCache.set(e,t),t}},W=class r extends nr.Construct{static _synthChart(e){let t=r.of(e),n=new P;return Ce(t,n),qe(t,n),Le(e).map(s=>s.toJson())}static of(e){let t=e.node.scope;return t?r.of(t):e}get charts(){let e=t=>t instanceof y.Chart;return new ot.DependencyGraph(this.node).topology().filter(e)}constructor(e={}){super(void 0,""),this.outdir=e.outdir??__Process$.env.CDK8S_OUTDIR??"dist",this.outputFileExtension=e.outputFileExtension??".k8s.yaml",this.yamlOutputType=e.yamlOutputType??v.FILE_PER_CHART,this.resolvers=[...e.resolvers??[],new Ie.LazyResolver,new Ie.ImplicitTokenResolver,new Ie.NumberStringUnionResolver],this.recordConstructMetadata=e.recordConstructMetadata??__Process$.env.CDK8S_RECORD_CONSTRUCT_METADATA==="true"}synth(){Me.mkdirSync(this.outdir,{recursive:!0});let e=new P;qe(this,e);let t=Ce(this,e),n=this.charts;switch(this.yamlOutputType){case v.FILE_PER_APP:let s=[];for(let a of n)s.push(...Object.values(a.toJson()));n.length>0&&D.Yaml.save(O.join(this.outdir,`app${this.outputFileExtension}`),s);break;case v.FILE_PER_CHART:let i=t?new Pe:new Q;for(let a of n){let u=i.name(a),p=Object.values(a.toJson());D.Yaml.save(O.join(this.outdir,u+this.outputFileExtension),p)}break;case v.FILE_PER_RESOURCE:for(let a of n)Object.values(a.toJson()).forEach(p=>{if(p!==void 0){let F=`${`${p.kind}.${p.metadata.name}`.replace(/[^0-9a-zA-Z-_.]/g,"")}`;D.Yaml.save(O.join(this.outdir,F+this.outputFileExtension),[p])}});break;case v.FOLDER_PER_CHART_FILE_PER_RESOURCE:let o=t?new Te:new ee;for(let a of n){let u=o.name(a),p=Le(a),F=O.join(this.outdir,u);Me.mkdirSync(F,{recursive:!0}),p.forEach(J=>{if(J!==void 0){let Lt=`${`${J.kind}.${J.metadata.name}`.replace(/[^0-9a-zA-Z-_.]/g,"")}`;D.Yaml.save(O.join(F,Lt+this.outputFileExtension),[J.toJson()])}})}break;default:break}if(this.recordConstructMetadata){let s=this.charts.flatMap(Le);this.writeConstructMetadata(s)}}synthYaml(){let e=new P;Ce(this,e),qe(this,e);let t=this.charts,n=[];for(let s of t)n.push(...Object.values(s.toJson()));return D.Yaml.stringify(...n)}writeConstructMetadata(e){let t={};for(let n of e)t[n.name]={path:n.node.path};Me.writeFileSync(O.join(this.outdir,"construct-metadata.json"),JSON.stringify({version:"1.0.0",resources:t}))}};g.App=W;it=rr;W[it]={fqn:"cdk8s.App",version:"2.69.34"};function qe(r,e){let t=[];for(let n of e.findAll(r.node)){let s=n.node.validate();for(let i of s)t.push(`[${n.node.path}] ${i}`)}if(t.length>0)throw new Error(`Validation failed with the following errors:
  ${t.join(`
  `)}`)}function st(r,e){let t=[];for(let n of e.findAll(r.node))for(let s of n.node.dependencies)t.push({source:n,target:s});return t}function Ce(r,e){let t=!1;for(let n of e.findAll(r.node).filter(s=>s instanceof y.Chart))for(let s of n.node.children.filter(i=>i instanceof y.Chart))n.node.addDependency(s),t=!0;for(let n of st(r,e)){let s=y.Chart.of(n.source),i=y.Chart.of(n.target);s!==i&&(s.node.addDependency(i),t=!0)}for(let n of st(r,e)){let s=y.Chart.of(n.source),i=y.Chart.of(n.target),o=e.findAll(n.target.node).filter(u=>u instanceof De.ApiObject).filter(u=>y.Chart.of(u)===i),a=e.findAll(n.source.node).filter(u=>u instanceof De.ApiObject).filter(u=>y.Chart.of(u)===s);for(let u of o)for(let p of a)u!==p&&p.node.addDependency(u)}return t}function Le(r){return new ot.DependencyGraph(r.node).topology().filter(e=>e instanceof De.ApiObject).filter(e=>y.Chart.of(e)===r).map(e=>e)}var Q=class{constructor(){}name(e){return`${at.Names.toDnsLabel(e)}`}},Pe=class extends Q{constructor(){super(),this.index=0}name(e){let t=`${this.index.toString().padStart(4,"0")}-${super.name(e)}`;return this.index++,t}},ee=class{constructor(){}name(e){return at.Names.toDnsLabel(e)}},Te=class extends ee{constructor(){super(),this.index=0}name(e){let t=`${this.index.toString().padStart(4,"0")}-${super.name(e)}`;return this.index++,t}}});var T=f(re=>{"use strict";var ut;Object.defineProperty(re,"__esModule",{value:!0});re.Chart=void 0;var sr=Symbol.for("jsii.rtti"),ir=h("constructs"),or=k(),ar=C(),cr=R(),ct=Symbol.for("cdk8s.Chart"),ur="CronJob",te=class r extends ir.Construct{static isChart(e){return e!==null&&typeof e=="object"&&ct in e}static[(ut=sr,Symbol.hasInstance)](e){return r.isChart(e)}static of(e){if(r.isChart(e))return e;let t=e.node.scope;if(!t)throw new Error("cannot find a parent chart (directly or indirectly)");return r.of(t)}constructor(e,t,n={}){super(e,t),this.namespace=n.namespace,this._labels=n.labels??{},this._disableResourceNameHashes=n.disableResourceNameHashes??!1,Object.defineProperty(this,ct,{value:!0})}get labels(){return{...this._labels}}generateObjectName(e){return cr.Names.toDnsLabel(e,{includeHash:!this._disableResourceNameHashes,maxLen:e.kind==ur?52:void 0})}addDependency(...e){this.node.addDependency(...e)}toJson(){return ar.App._synthChart(this)}get apiObjects(){return this.node.children.filter(e=>e instanceof or.ApiObject)}};re.Chart=te;te[ut]={fqn:"cdk8s.Chart",version:"2.69.34"}});var ke=f(se=>{"use strict";var dt;Object.defineProperty(se,"__esModule",{value:!0});se.JsonPatch=void 0;var lr=Symbol.for("jsii.rtti"),lt=h("fast-json-patch"),ne=class r{static apply(e,...t){return(0,lt.applyPatch)(e,(0,lt.deepClone)(t.map(s=>s._toJson()))).newDocument}static add(e,t){return new r({op:"add",path:e,value:t})}static remove(e){return new r({op:"remove",path:e})}static replace(e,t){return new r({op:"replace",path:e,value:t})}static copy(e,t){return new r({op:"copy",from:e,path:t})}static move(e,t){return new r({op:"move",from:e,path:t})}static test(e,t){return new r({op:"test",path:e,value:t})}constructor(e){this.operation=e}_toJson(){return this.operation}};se.JsonPatch=ne;dt=lr;ne[dt]={fqn:"cdk8s.JsonPatch",version:"2.69.34"}});var $e=f(oe=>{"use strict";var ht;Object.defineProperty(oe,"__esModule",{value:!0});oe.ApiObjectMetadataDefinition=void 0;var dr=Symbol.for("jsii.rtti"),hr=ge(),fr=q(),ie=class{constructor(e){this.name=e.name,this.labels={...e.labels??{}},this.annotations={...e.annotations??{}},this.namespace=e.namespace,this.finalizers=e.finalizers?[...e.finalizers]:[],this.ownerReferences=e.ownerReferences?[...e.ownerReferences]:[],this.apiObject=e.apiObject,this._additionalAttributes=e,delete this._additionalAttributes.apiObject}addLabel(e,t){this.labels[e]=t}getLabel(e){return this.labels[e]}addAnnotation(e,t){this.annotations[e]=t}addFinalizers(...e){this.finalizers.push(...e)}addOwnerReference(e){this.ownerReferences.push(e)}add(e,t){this._additionalAttributes[e]=t}toJson(){return(t=>(0,hr.sanitizeValue)(t,{filterEmptyArrays:!0,filterEmptyObjects:!0}))((0,fr.resolve)([],{...this._additionalAttributes,name:this.name,namespace:this.namespace,annotations:this.annotations,finalizers:this.finalizers,ownerReferences:this.ownerReferences,labels:this.labels},this.apiObject))}};oe.ApiObjectMetadataDefinition=ie;ht=dr;ie[ht]={fqn:"cdk8s.ApiObjectMetadataDefinition",version:"2.69.34"}});var k=f(ce=>{"use strict";var pt;Object.defineProperty(ce,"__esModule",{value:!0});ce.ApiObject=void 0;var pr=Symbol.for("jsii.rtti"),mr=h("constructs"),br=ge(),yr=T(),_r=ke(),vr=$e(),wr=q(),ft=Symbol.for("cdk8s.ApiObject"),ae=class r extends mr.Construct{static isApiObject(e){return e!==null&&typeof e=="object"&&ft in e}static[(pt=pr,Symbol.hasInstance)](e){return r.isApiObject(e)}static of(e){if(e instanceof r)return e;let t=e.node.defaultChild;if(!t)throw new Error(`cannot find a (direct or indirect) child of type ApiObject for construct ${e.node.path}`);return r.of(t)}constructor(e,t,n){super(e,t),this.props=n,this.patches=new Array,this.chart=yr.Chart.of(this),this.kind=n.kind,this.apiVersion=n.apiVersion,this.apiGroup=Sr(this.apiVersion),this.name=n.metadata?.name??this.chart.generateObjectName(this),this.metadata=new vr.ApiObjectMetadataDefinition({name:this.name,...n.metadata,namespace:n.metadata?.namespace??this.chart.namespace,labels:{...this.chart.labels,...n.metadata?.labels},apiObject:this}),Object.defineProperty(this,ft,{value:!0})}addDependency(...e){this.node.addDependency(...e)}addJsonPatch(...e){this.patches.push(...e)}toJson(){try{let e={...this.props,metadata:this.metadata.toJson()},t=!__Process$.env.CDK8S_DISABLE_SORT,n=(0,br.sanitizeValue)((0,wr.resolve)([],e,this),{sortKeys:t}),s=_r.JsonPatch.apply(n,...this.patches),i={},o=["apiVersion","kind","metadata",...Object.keys(s)];for(let a of o)a in s&&(i[a]=s[a]);return i}catch(e){throw new Error(`Failed serializing construct at path '${this.node.path}' with name '${this.name}': ${e}`)}}};ce.ApiObject=ae;ae[pt]={fqn:"cdk8s.ApiObject",version:"2.69.34"};function Sr(r){let e=r.split("/");if(e.length===1)return"core";if(e.length===2)return e[0];throw new Error(`invalid apiVersion ${r}, expecting GROUP/VERSION. See https://kubernetes.io/docs/reference/using-api/api-overview/#api-groups`)}});var vt=f(le=>{"use strict";var _t;Object.defineProperty(le,"__esModule",{value:!0});le.Testing=void 0;var jr=Symbol.for("jsii.rtti"),mt=h("node:fs"),bt=h("node:os"),yt=h("node:path"),Or=C(),gr=T(),ue=class{static app(e){let t;return e?t=e.outdir??mt.mkdtempSync(yt.join(bt.tmpdir(),"cdk8s.outdir.")):t=mt.mkdtempSync(yt.join(bt.tmpdir(),"cdk8s.outdir.")),new Or.App({outdir:t,...e})}static chart(){return new gr.Chart(this.app(),"test")}static synth(e){return e.toJson()}constructor(){}};le.Testing=ue;_t=jr;ue[_t]={fqn:"cdk8s.Testing",version:"2.69.34"}});var Ne=f(he=>{"use strict";var St;Object.defineProperty(he,"__esModule",{value:!0});he.Include=void 0;var Er=Symbol.for("jsii.rtti"),Ar=h("constructs"),wt=k(),Rr=L(),de=class extends Ar.Construct{constructor(e,t,n){super(e,t);let s=Rr.Yaml.load(n.url),i=0;for(let o of s){let u=[o.metadata?.name??`object${i++}`,o.kind?.toLowerCase(),o.metadata?.namespace].filter(p=>p).join("-");new wt.ApiObject(this,u,o)}}get apiObjects(){return this.node.children.filter(e=>e instanceof wt.ApiObject)}};he.Include=de;St=Er;de[St]={fqn:"cdk8s.Include",version:"2.69.34"}});var jt=f(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe._child_process=void 0;var Mr=h("node:child_process");fe._child_process={spawnSync:Mr.spawnSync}});var gt=f(me=>{"use strict";var Ot;Object.defineProperty(me,"__esModule",{value:!0});me.Helm=void 0;var Ir=Symbol.for("jsii.rtti"),Fe=h("node:fs"),qr=h("node:os"),Je=h("node:path"),Cr=jt(),Lr=Ne(),Dr=R(),Pr=L(),Tr=10*1024*1024,pe=class extends Lr.Include{constructor(e,t,n){let s=Fe.mkdtempSync(Je.join(qr.tmpdir(),"cdk8s-helm-")),i=new Array;if(i.push("template"),n.values&&Object.keys(n.values).length>0){let p=Je.join(s,"overrides.yaml");Fe.writeFileSync(p,Pr.Yaml.stringify(n.values)),i.push("-f",p)}n.repo&&i.push("--repo",n.repo),n.version&&i.push("--version",n.version),n.namespace&&i.push("--namespace",n.namespace),n.helmFlags&&i.push(...n.helmFlags);let o=n.releaseName??Dr.Names.toDnsLabel(e,{maxLen:53,extra:[t]});i.push(o),i.push(n.chart);let a=n.helmExecutable??"helm",u=kr(s,a,i);super(e,t,{url:u}),this.releaseName=o}};me.Helm=pe;Ot=Ir;pe[Ot]={fqn:"cdk8s.Helm",version:"2.69.34"};function kr(r,e,t){let n=Cr._child_process.spawnSync(e,t,{maxBuffer:Tr});if(n.error){let o=n.error.message;throw o.includes("ENOENT")?new Error(`unable to execute '${e}' to render Helm chart. Is it installed on your system?`):new Error(`error while rendering a helm chart: ${o}`)}if(n.status!==0)throw new Error(n.stderr.toString());let s=Je.join(r,"chart.yaml"),i=n.stdout;return Fe.writeFileSync(s,i),s}});var At=f(ye=>{"use strict";var Et;Object.defineProperty(ye,"__esModule",{value:!0});ye.Duration=void 0;var $r=Symbol.for("jsii.rtti"),be=class r{static millis(e){return new r(e,c.Milliseconds)}static seconds(e){return new r(e,c.Seconds)}static minutes(e){return new r(e,c.Minutes)}static hours(e){return new r(e,c.Hours)}static days(e){return new r(e,c.Days)}static parse(e){let t=e.match(/^PT(?:(\d+)D)?(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?$/);if(!t)throw new Error(`Not a valid ISO duration: ${e}`);let[,n,s,i,o]=t;if(!n&&!s&&!i&&!o)throw new Error(`Not a valid ISO duration: ${e}`);return r.millis(a(o)*c.Seconds.inMillis+a(i)*c.Minutes.inMillis+a(s)*c.Hours.inMillis+a(n)*c.Days.inMillis);function a(u){return u?Number(u):0}}constructor(e,t){if(e<0)throw new Error(`Duration amounts cannot be negative. Received: ${e}`);this.amount=e,this.unit=t}toMilliseconds(e={}){return w(this.amount,this.unit,c.Milliseconds,e)}toSeconds(e={}){return w(this.amount,this.unit,c.Seconds,e)}toMinutes(e={}){return w(this.amount,this.unit,c.Minutes,e)}toHours(e={}){return w(this.amount,this.unit,c.Hours,e)}toDays(e={}){return w(this.amount,this.unit,c.Days,e)}toIsoString(){if(this.amount===0)return"PT0S";switch(this.unit){case c.Seconds:return`PT${this.fractionDuration("S",60,r.minutes)}`;case c.Minutes:return`PT${this.fractionDuration("M",60,r.hours)}`;case c.Hours:return`PT${this.fractionDuration("H",24,r.days)}`;case c.Days:return`PT${this.amount}D`;default:throw new Error(`Unexpected time unit: ${this.unit}`)}}toHumanString(){if(this.amount===0)return n(0,this.unit);let e=w(this.amount,this.unit,c.Milliseconds,{integral:!1}),t=new Array;for(let s of[c.Days,c.Hours,c.Hours,c.Minutes,c.Seconds]){let i=Math.floor(w(e,c.Milliseconds,s,{integral:!1}));i>0&&(t.push(n(i,s)),e-=i*s.inMillis)}return e>0&&t.push(n(e,c.Milliseconds)),t.slice(0,2).join(" ");function n(s,i){return s===1?`${s} ${i.label.substring(0,i.label.length-1)}`:`${s} ${i.label}`}}unitLabel(){return this.unit.toString()}fractionDuration(e,t,n){if(this.amount<t)return`${this.amount}${e}`;let s=this.amount%t,i=n((this.amount-s)/t).toIsoString().slice(2);return s>0?`${i}${s}${e}`:i}};ye.Duration=be;Et=$r;be[Et]={fqn:"cdk8s.Duration",version:"2.69.34"};var c=class{constructor(e,t){this.label=e,this.inMillis=t}toString(){return this.label}};c.Milliseconds=new c("millis",1);c.Seconds=new c("seconds",1e3);c.Minutes=new c("minutes",6e4);c.Hours=new c("hours",36e5);c.Days=new c("days",864e5);function w(r,e,t,{integral:n=!0}){if(e.inMillis===t.inMillis){if(n&&!Number.isInteger(r))throw new Error(`${r} must be a whole number of ${t}.`);return r}let s=e.inMillis/t.inMillis,i=r*s;if(!Number.isInteger(i)&&n)throw new Error(`'${r} ${e}' cannot be converted into a whole number of ${t}.`);return i}});var Mt=f(ve=>{"use strict";var Rt;Object.defineProperty(ve,"__esModule",{value:!0});ve.Cron=void 0;var Nr=Symbol.for("jsii.rtti"),_e=class r{static everyMinute(){return r.schedule({minute:"*",hour:"*",day:"*",month:"*",weekDay:"*"})}static hourly(){return r.schedule({minute:"0",hour:"*",day:"*",month:"*",weekDay:"*"})}static daily(){return r.schedule({minute:"0",hour:"0",day:"*",month:"*",weekDay:"*"})}static weekly(){return r.schedule({minute:"0",hour:"0",day:"*",month:"*",weekDay:"0"})}static monthly(){return r.schedule({minute:"0",hour:"0",day:"1",month:"*",weekDay:"*"})}static annually(){return r.schedule({minute:"0",hour:"0",day:"1",month:"1",weekDay:"*"})}static schedule(e){return new r(e)}constructor(e={}){let t=$(e.minute,"*"),n=$(e.hour,"*"),s=$(e.month,"*"),i=$(e.day,"*"),o=$(e.weekDay,"*");this.expressionString=`${t} ${n} ${i} ${s} ${o}`}};ve.Cron=_e;Rt=Nr;_e[Rt]={fqn:"cdk8s.Cron",version:"2.69.34"};function $(r,e){return r??e}});var qt=f(A=>{"use strict";var It;Object.defineProperty(A,"__esModule",{value:!0});A.SizeRoundingBehavior=A.Size=void 0;var Fr=Symbol.for("jsii.rtti"),we=class r{static kibibytes(e){return new r(e,l.Kibibytes)}static mebibytes(e){return new r(e,l.Mebibytes)}static gibibytes(e){return new r(e,l.Gibibytes)}static tebibytes(e){return new r(e,l.Tebibytes)}static pebibyte(e){return new r(e,l.Pebibytes)}constructor(e,t){if(e<0)throw new Error(`Storage amounts cannot be negative. Received: ${e}`);this.amount=e,this.unit=t}asString(){return`${this.amount}${this.unit.abbr}`}toKibibytes(e={}){return N(this.amount,this.unit,l.Kibibytes,e)}toMebibytes(e={}){return N(this.amount,this.unit,l.Mebibytes,e)}toGibibytes(e={}){return N(this.amount,this.unit,l.Gibibytes,e)}toTebibytes(e={}){return N(this.amount,this.unit,l.Tebibytes,e)}toPebibytes(e={}){return N(this.amount,this.unit,l.Pebibytes,e)}};A.Size=we;It=Fr;we[It]={fqn:"cdk8s.Size",version:"2.69.34"};var E;(function(r){r[r.FAIL=0]="FAIL",r[r.FLOOR=1]="FLOOR",r[r.NONE=2]="NONE"})(E||(A.SizeRoundingBehavior=E={}));var l=class{constructor(e,t,n){this.label=e,this.inKibiBytes=t,this.abbr=n}toString(){return this.label}};l.Kibibytes=new l("kibibytes",1,"Ki");l.Mebibytes=new l("mebibytes",1024,"Mi");l.Gibibytes=new l("gibibytes",1024*1024,"Gi");l.Tebibytes=new l("tebibytes",1024*1024*1024,"Ti");l.Pebibytes=new l("pebibytes",1024*1024*1024*1024,"Pi");function N(r,e,t,n={}){let s=n.rounding??E.FAIL;if(e.inKibiBytes===t.inKibiBytes)return r;let i=e.inKibiBytes/t.inKibiBytes,o=r*i;switch(s){case E.NONE:return o;case E.FLOOR:return Math.floor(o);default:case E.FAIL:if(!Number.isInteger(o))throw new Error(`'${r} ${e}' cannot be converted into a whole number of ${t}.`);return o}}});var Ct=f(d=>{"use strict";var Jr=d&&d.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,s)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),m=d&&d.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Jr(e,r,t)};Object.defineProperty(d,"__esModule",{value:!0});m(k(),d);m(T(),d);m(Ee(),d);m(vt(),d);m(C(),d);m(Ne(),d);m(L(),d);m($e(),d);m(Ae(),d);m(R(),d);m(gt(),d);m(ke(),d);m(At(),d);m(Mt(),d);m(qt(),d);m(q(),d)});var Se=Ft(Ct()),{__esModule:cn,NumberStringUnionResolver:un,ImplicitTokenResolver:ln,LazyResolver:dn,ResolutionContext:hn,resolve:fn,SizeRoundingBehavior:pn,Size:mn,Cron:bn,Duration:yn,JsonPatch:_n,Helm:vn,Names:wn,Lazy:Sn,ApiObjectMetadataDefinition:jn,Yaml:On,Include:gn,App:En,YamlOutputType:An,Testing:Rn,DependencyVertex:Mn,DependencyGraph:In,Chart:qn,ApiObject:Cn}=Se,Ln=Se.default??Se;export{Cn as ApiObject,jn as ApiObjectMetadataDefinition,En as App,qn as Chart,bn as Cron,In as DependencyGraph,Mn as DependencyVertex,yn as Duration,vn as Helm,ln as ImplicitTokenResolver,gn as Include,_n as JsonPatch,Sn as Lazy,dn as LazyResolver,wn as Names,un as NumberStringUnionResolver,hn as ResolutionContext,mn as Size,pn as SizeRoundingBehavior,Rn as Testing,On as Yaml,An as YamlOutputType,cn as __esModule,Ln as default,fn as resolve};
//# sourceMappingURL=cdk8s.mjs.map